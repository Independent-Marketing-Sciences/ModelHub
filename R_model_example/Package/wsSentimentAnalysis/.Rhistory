load_all()
loaded_packages()
install.packages("tidytext")
install.packages("dyplr")
install.packages(c('dplyr', 'data.Table', 'tidyr'))
install.packages(c('data.table','readxl', 'writexl', 'pbapply'))
load_all()
install.packages('testthat')
load_all()
run_emotions("/Users/victoria.daughtrey/Desktop/SPMS_Patients.xlsx",'Full Text', 'nrc')
view_languages()
library(devtools)
load_all()
run_emotions('/Users/daniele.dalgrande/Downloads/SPMS_Patientsxlsx.xlsx', 'Full Text', sentiment_set = 'nrc', emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust', 'positive', 'negative'))
library(devtools)
load_all()
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/SPMS_Patients.xlsx', 'Full Text', emotions = c('positive', 'negative'))
languages_file_formatted
View(languages_file_formatted)
names(languages_file_formatted)
load(languages_file_formatted)
load('/Volumes/Groups/ANALYTICS/04\ Data\ Science/Packages/wsSentimentAnalysis/data/languages_file_formatted.rda')
load(languages_file_formatted)
names(languages_file_formatted)
names(languages_file_formatted) <- tolower(names(languages_file_formatted))
names(languages_file_formatted)
use_data(languages_file_formatted)
use_data(languages_file_formatted, overwrite = TRUE)
load_all()
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/SPMS_Patients.xlsx', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/SPMS_Patients.xlsx', 'Full Text' emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/SPMS_Patients.xlsx', 'Full Text', emotions = c('positive', 'negative'))
load_all()
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/SPMS_Patients.xlsx', 'Full Text', emotions = c('positive', 'negative'))
library(devtools)
load_all()
library(devtools)
load_all()
load_all()
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/gordons/ShallWe_mentions.xlsx', 'Full Text')
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/gordons/2015812937_Gordon_s.xlsx', 'Full Text')
library(devtools)
load_all()
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/gordons/2015812937_Gordon_s.xlsx', 'Full Text')
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/gordons/ShallWe_mentions.xlsx', 'Full Text')
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/gordons/2015812937_Gordon_s.xlsx', 'Full Text', emotions = c('joy', 'fear', 'sadness', 'anger', 'disgust',))
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/gordons/2015812937_Gordon_s.xlsx', 'Full Text', emotions = c('joy', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/gordons/ShallWe_mentions.xlsx', 'Full Text', emotions = c('joy', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/gordons/2015826308_Competitors.xlsx', 'Full Text', emotions = c('joy', 'fear', 'sadness', 'anger', 'disgust'))
library(devtools)
load_all()
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_Eczema_sample.xlsx','Full Text', 'nrc', positive, negative)
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_Eczema_sample.xlsx','Full Text', 'nrc', 'positive', 'negative')
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_Eczema_sample.xlsx','Full Text', 'nrc', 'positive' 'negative')
library(devtools)
library(devtools)
load_all()
library(devtools)
load_all()
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/Nestle_DE_Eczema_sample.xlsx', 'Full Text', language = 'german', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/Nestle_DE.xlsx', 'Full Text', language = 'german', emotions = c('positive', 'negative'))
traceback()
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/Nestle_DE.xlsx', 'Full Text', words_to_exlude = NULL, language = 'german', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/Nestle_DE.xlsx', 'Full Text', words_to_exlude = NULL, language = 'german', emotions = c('positive', 'negative'))
load_all()
run_emotions_all_languages('/Users/daniele.dalgrande/Downloads/Nestle_DE.xlsx', 'Full Text', words_to_exlude = NULL, language = 'german', emotions = c('positive', 'negative'))
str(new_df)
#write to disk
new_file_name <- paste0(directory_of_file,
'/',
file_name,
'_emotions.xlsx')
new_file_name
writexl::write_xlsx(new_df, new_file_name)
?writexl
?write_xlsx
load_all()
library(devtools)
load_all()
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_Eczema_sample.xlsx', 'Full Text', language='german', emotions = c('positive','negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_Eczema_sample.xlsx', 'Full Text', language='german', emotions = c('joy','trust','fear','sadness','anger','disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_Acne_sample.xlsx', 'Full Text', language='german', emotions = c('positive','negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_Acne_sample.xlsx', 'Full Text', language='german', emotions = c('joy','trust','fear','sadness','anger','disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_GenSkinCare_sample.xlsx', 'Full Text', language='german', emotions = c('positive','negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_GenSkinCare_sample.xlsx', 'Full Text', language='german', emotions = c('joy','trust','fear','sadness','anger','disgust'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/US_Acne_Sample.xlsx','Full Text', 'nrc', emotion = c('positive', 'negative'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/US_Acne_Sample.xlsx','Full Text', 'nrc', emotion = c('positive', 'negative'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/US_Age_Sample.xlsx ','Full Text', 'nrc', emotion = c('positive', 'negative'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/US_Age_Sample.xlsx','Full Text', 'nrc', emotion = c('positive', 'negative'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/US_Eczema_Sample.xlsx','Full Text', 'nrc', emotion = c('positive', 'negative'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/US_Sensitive_Sample.xlsx','Full Text', 'nrc', emotion = c('positive', 'negative'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/US_Sensitive_Sample.xlsx','Full Text', 'nrc', emotion = c('positive', 'negative'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/US_Skincare_Sample.xlsx','Full Text', 'nrc', emotion = c('positive', 'negative'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/US_Acne_Sample.xlsx', 'Full Text', 'nrc', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/US_Age_Sample.xlsx', 'Full Text', 'nrc', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/US_Eczema_Sample.xlsx', 'Full Text', 'nrc', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/US_Sensitive_Sample.xlsx', 'Full Text', 'nrc', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/US_Skincare_Sample.xlsx', 'Full Text', 'nrc', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Acne.xlsx','Full Text', 'nrc', emotion = c('positive', 'negative'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Acne.xlsx /Users/victoria.daughtrey/Desktop/Emotions/Mkts_Age.xlsx','Full Text', 'nrc', emotion = c('positive', 'negative'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Age.xlsx','Full Text', 'nrc', emotion = c('positive', 'negative'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Age.xlsx','Full Text', 'nrc', emotion = c('positive', 'negative'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Eczema.xlsx','Full Text', 'nrc', emotion = c('positive', 'negative'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Sensitive.xlsx','Full Text', 'nrc', emotion = c('positive', 'negative'))
run_emotions('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Skincare.xlsx','Full Text', 'nrc', emotion = c('positive', 'negative'))
library(devtools)
load_all()
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_SensSkin_sample.xlsx', 'Full Text', language = 'german', emotions = c('positive, 'negative') )
view_languages()
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_SensSkin_sample.xlsx', 'Full Text', language = 'german', emotions = (c('positive, 'negative') ))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_SensSkin_sample.xlsx', 'Full Text','german', emotions = (c('positive, 'negative') ))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_SensSkin_sample.xlsx', 'Full Text', language = 'german', 'nrc', emotions = c('positive, 'negative') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_SensSkin_sample.xlsx', 'Full Text', words_to_exlude = NULL,language = 'german', 'nrc', emotions = c('positive, 'negative') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_SensSkin_sample.xlsx',
'Full Text',
words_to_exlude = NULL,
language = 'german',
'nrc',
emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_SensSkin_sample.xlsx',
'Full Text',
words_to_exlude = NULL,
language = 'german',
emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Nestle_DE_SensSkin_sample.xlsx',
'Full Text',
words_to_exlude = NULL,
language = 'german',
emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/PH_Nestle_Acne_sample.xlsx',
'Full Text',
words_to_exlude = NULL,
language = 'tagalog',
emotions = c('positive', 'negative'))
run_emotions_all_languages('//Users/victoria.daughtrey/Desktop/Emotions/PH_Nestle_AntiAge_sample.xlsx',
'Full Text',
words_to_exlude = NULL,
language = 'tagalog',
emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/PH_Nestle_Eczema_sample.xlsx',
'Full Text',
words_to_exlude = NULL,
language = 'tagalog',
emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/PH_Nestle_GenSkin_sample.xlsx',
'Full Text',
words_to_exlude = NULL,
language = 'tagalog',
emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/PH_Nestle_SensSkin_sample.xlsx',
'Full Text',
words_to_exlude = NULL,
language = 'tagalog',
emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/PH_Nestle_SensSkin_sample.xlsx',
'Full Text',
words_to_exlude = NULL,
language = 'tagalog',
emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/PH_Nestle_GenSkin_sample.xlsx',
'Full Text',
words_to_exlude = NULL,
language = 'tagalog',
emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/PH_Nestle_Eczema_sample.xlsx',
'Full Text',
words_to_exlude = NULL,
language = 'tagalog',
emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/PH_Nestle_AntiAge_sample.xlsx',
'Full Text',
words_to_exlude = NULL,
language = 'tagalog',
emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/PH_Nestle_Acne_sample.xlsx',
'Full Text',
words_to_exlude = NULL,
language = 'tagalog',
emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
library(devtools)
load_all()
view_languages()
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Acne\ SAU_1\%.xlsx', 'Full Text', language = 'arabic', emotion = c('positive', 'negative') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Acne SAU_1\%.xlsx', 'Full Text', language = 'arabic', emotion = c('positive', 'negative') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/AcneSAU_1\%.xlsx', 'Full Text', language = 'arabic', emotion = c('positive', 'negative') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/AcneSAU_1.xlsx', 'Full Text', language = 'arabic', emotion = c('positive', 'negative') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/AcneSAU_1.xlsx', 'Full Text', language = 'arabic', emotion = c('positive', 'negative') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/AntiAgining\ SAU_8.xlsx', 'Full Text', language = 'arabic', emotion = c('positive', 'negative') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Eczema\ SAU_15.xlsx', 'Full Text', language = 'arabic', emotion = c('positive', 'negative') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sensitive\ Skin\ SAU_43.xlsx', 'Full Text', language = 'arabic', emotion = c('positive', 'negative') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/SkinCare\ SAU_52.xlsx', 'Full Text', language = 'arabic', emotion = c('positive', 'negative') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/SkinCare\ SAU_52.xlsx', 'Full Text', language = 'arabic', emotion = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sensitive\ Skin\ SAU_43.xlsx', 'Full Text', language = 'arabic', emotion = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Eczema\ SAU_15.xlsx', 'Full Text', language = 'arabic', emotion = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/AntiAgining\ SAU_8.xlsx', 'Full Text', language = 'arabic', emotion = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust') )
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/AcneSAU_1.xlsx', 'Full Text', language = 'arabic', emotion = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust') )
library (devtools)
load_all
load_all ()
ls(package:wsSentiment)
ls(package:devtools)
?run_emotions_all_languages
load_all ()
install.packages('tidytext')
install.packages("tidytext")
install.packages('pbapply')
load_all ()
library (devtools)
load_all ()
install.packages('writexl')
?run_emotions_all_languages()
load_all ()
install.packages('testthat')
load_all ()
?run_emotions_all_languages()
library (devtools)
load_all ()
?run_emotions_all_languages
?view_languages
view_languages()
view_languages()
View(languages_file_formatted)
run_emotions_all_languages('/Volumes/Groups/ANALYTICS/01 Clients/HSBC/02 Live/We Are Not An Island/05 Analysis/Data/Brandwatch/HSBC_Snapshot_report_Data.xlsx',
'Full Text',
NULL,
'english', c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust')
)
run_emotions_all_languages('/Volumes/Groups/ANALYTICS/01 Clients/HSBC/02 Live/We Are Not An Island/05 Analysis/Data/Brandwatch/HSBC_Snapshot_report_Data.xlsx',
'Full Text',
NULL,
'english', c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust')
)
rlang::last_error()
run_emotions_all_languages('/Volumes/Groups/ANALYTICS/01 Clients/HSBC/02 Live/We Are Not An Island/05 Analysis/Data/Brandwatch/HSBC_Snapshot_report_Data.xlsx',
'Full Text',
NULL,
'english', c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust')
)
library (devtools)
load_all ()
run_emotions_all_languages('/Volumes/Groups/ANALYTICS/01 Clients/HSBC/02 Live/We Are Not An Island/05 Analysis/Data/Brandwatch/HSBC_Snapshot_report_Data.xlsx',
'Full Text',
NULL,
'english', c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust')
)
load_all ()
load_all ()
run_emotions_all_languages('/Volumes/Groups/ANALYTICS/01 Clients/HSBC/02 Live/We Are Not An Island/05 Analysis/Data/Brandwatch/HSBC_Snapshot_report_Data.xlsx',
'Full Text',
NULL,
'english', c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust')
)
load_all ()
load_all ()
run_emotions_all_languages('/Volumes/Groups/ANALYTICS/01 Clients/HSBC/02 Live/We Are Not An Island/05 Analysis/Data/Brandwatch/HSBC_Snapshot_report_Data.xlsx',
'Full Text',
NULL,
'english', c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust')
)
library(pbapply)
?pblapply
load_all ()
run_emotions_all_languages('/Volumes/Groups/ANALYTICS/01 Clients/HSBC/02 Live/We Are Not An Island/05 Analysis/Data/Brandwatch/HSBC_Snapshot_report_Data.xlsx',
'Full Text',
NULL,
'english', c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust')
)
load_all ()
run_emotions_all_languages('/Volumes/Groups/ANALYTICS/01 Clients/HSBC/02 Live/We Are Not An Island/05 Analysis/Data/Brandwatch/HSBC_Snapshot_report_Data.xlsx',
'Full Text',
NULL,
'english', c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust')
)
run_emotions_all_languages('/Volumes/Groups/ANALYTICS/01 Clients/HSBC/02 Live/We Are Not An Island/05 Analysis/Data/Brandwatch/HSBC_Data_Updated.xlsx',
'Full Text',
NULL,
'english', c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust')
)
#read in the file - skip the rows which are not needed
mydata <- read_excel('/Volumes/Groups/ANALYTICS/01 Clients/HSBC/02 Live/We Are Not An Island/05 Analysis/Data/Brandwatch/HSBC_News_Data.xlsx')
library("stringr")
#load packages - the first time you need to install them with instal.packages('package_name')
library("tm")
library("SnowballC")
library("wordcloud2")
library("RColorBrewer")
library("readxl")
library("stringr")
#read in the file - skip the rows which are not needed
mydata <- read_excel('/Volumes/Groups/ANALYTICS/01 Clients/HSBC/02 Live/We Are Not An Island/05 Analysis/Data/Brandwatch/HSBC_News_Data.xlsx')
#just get the full text
text <- mydata$`Full Text`
#function definition
make_wc <- function(text, Words2remove = c('hsbc', 'we are not alone', 'together we thrive'), max_words = NULL) {
#remove all the weird chars
text <- str_replace_all(text, "[^[:alnum:]]", " ")
#make a corpus
docs <- Corpus(VectorSource(text))
#convert to utf
docs <- tm_map(docs, function(x) iconv(enc2utf8(x), sub = "byte"))
# Remove punctuations
docs <- tm_map(docs, removePunctuation)
# Convert the text to lower case
docs <- tm_map(docs, content_transformer(tolower))
# Remove numbers
docs <- tm_map(docs, removeNumbers)
# Remove english common stopwords
docs <- tm_map(docs, removeWords, stopwords("english"))
# Eliminate extra white spaces
docs <- tm_map(docs, stripWhitespace)
#make word frequencies
dtm <- TermDocumentMatrix(docs)
m <- as.matrix(dtm)
v <- sort(rowSums(m), decreasing=TRUE)
d <- data.frame(word = names(v), freq=v)
#remove unneeded words
if (!is.null(Words2remove)) {
d <- d[-which(d$word %in% Words2remove), ]
}
#specify number of words
if (!is.null(max_words)) {
d <- d[1:max_words, ]
}
#make colours
solid <- c(round(0.02 * nrow(d)),
round(0.03 * nrow(d)),
round(0.1 * nrow(d)),
round(0.15 * nrow(d)))
light <- nrow(d) - sum(solid)
colorvec <- rep(c("#08306B", "#08519C", "#4292C6", "#2171B5", "#9ECAE1"), times = c(solid, light))
#rev(brewer.pal(9,"Blues"))[1:7]
#plot wordcloud
wordcloud2(d,
ellipticity = 0.4,
color = colorvec
)
}
#function definition
make_wc <- function(text, Words2remove = c('hsbc', 'we are not alone', 'together we thrive'), max_words = NULL) {
#remove all the weird chars
text <- str_replace_all(text, "[^[:alnum:]]", " ")
#make a corpus
docs <- Corpus(VectorSource(text))
#convert to utf
docs <- tm_map(docs, function(x) iconv(enc2utf8(x), sub = "byte"))
# Remove punctuations
docs <- tm_map(docs, removePunctuation)
# Convert the text to lower case
docs <- tm_map(docs, content_transformer(tolower))
# Remove numbers
docs <- tm_map(docs, removeNumbers)
# Remove english common stopwords
docs <- tm_map(docs, removeWords, stopwords("english"))
# Eliminate extra white spaces
docs <- tm_map(docs, stripWhitespace)
#make word frequencies
dtm <- TermDocumentMatrix(docs)
m <- as.matrix(dtm)
v <- sort(rowSums(m), decreasing=TRUE)
d <- data.frame(word = names(v), freq=v)
#remove unneeded words
if (!is.null(Words2remove)) {
d <- d[-which(d$word %in% Words2remove), ]
}
#specify number of words
if (!is.null(max_words)) {
d <- d[1:max_words, ]
}
#make colours
solid <- c(round(0.02 * nrow(d)),
round(0.03 * nrow(d)),
round(0.1 * nrow(d)),
round(0.15 * nrow(d)))
light <- nrow(d) - sum(solid)
colorvec <- rep(c("#08306B", "#08519C", "#4292C6", "#2171B5", "#9ECAE1"), times = c(solid, light))
#rev(brewer.pal(9,"Blues"))[1:7]
#plot wordcloud
wordcloud2(d,
ellipticity = 0.4,
color = colorvec
)
}
#e.g. on how to run function
make_wc(text,
Words2remove = c('busy','really','much','want','love','know','make','everyone','didn','pic','day','today','good','bagel','patient','patients','redacted', 'get', 'get', 'just', 'see', 'don', 'secondary','time','people','twitter', 'can', 'will', 'nthe', 'one', 'also', 'may', 'multiple', 'sclerosis', 'progressive', 'disease', 'now', 'like', 'years', 'nwe', 'www', 'com'),
max_words = 350)
#e.g. on how to run function
make_wc(text,
Words2remove = c('hsbc'),
max_words = 350)
#plot wordcloud
wordcloud2(d,
ellipticity = 0.4,
color = colorvec
)
library(devtools)
load_all
load_all()
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Acne.xlsx', 'Full Text', language='english', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Age.xlsx', 'Full Text', language='english', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Eczema.xlsx', 'Full Text', language='english', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_GeneralSkincare.xlsx', 'Full Text', language='english', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Sensitive.xlsx', 'Full Text', language='english', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Sensitive.xlsx', 'Full Text', language='english', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/US_Acne.xlsx', 'Full Text', language='english', emotions= c('positive', 'negative'))
run_emotions_all_languages('Users/victoria.daughtrey/Desktop/Emotions/US_Age.xlsx', 'Full Text', language='english', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/US_Age.xlsx', 'Full Text', language='english', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/US_Eczema.xlsx', 'Full Text', language='english', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/US_GeneralSkincare.xlsx', 'Full Text', language='english', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/US_SensitiveSkin.xlsx', 'Full Text', language='english', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/US_SensitiveSkin.xlsx', 'Full Text', language='english', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/US_GeneralSkincare.xlsx', 'Full Text', language='english', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/US_Eczema.xlsx', 'Full Text', language='english', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/US_Age.xlsx', 'Full Text', language='english', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/US_Acne.xlsx', 'Full Text', language='english', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Sensitive.xlsx', 'Full Text', language='english', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Sensitive.xlsx', 'Full Text', language='english', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_GeneralSkincare.xlsx', 'Full Text', language='english', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Eczema.xlsx', 'Full Text', language='english', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Age.xlsx', 'Full Text', language='english', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Mkts_Acne.xlsx', 'Full Text', language='english', emotions= c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
library(devtools)
load_all()
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_Acne_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_Acne_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_Acne_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_Eczema_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_SensitiveSkin_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_SkinCare_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_SkinCare_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_SensitiveSkin_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_Eczema_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_Acne_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_Acne_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_AntiAging_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = 'positive', 'negative')
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_AntiAging_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = ('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_AntiAging_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_AntiAging_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = c('joy', 'trust', 'sadness', 'fear', 'anger' , 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Saudi_AA_Competitors.xlsx', 'Full Text', language = 'arabic', emotions = c('positive', 'negative'))
library(devtools)
load_all()
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_AntiAging_Saudi.xlsx', 'Full Text', language= 'arabic', emotions = c('joy', 'trust', 'sadness', 'fear', 'anger' , 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Saudi_AA_Competitors.xlsx', 'Full Text', language= 'arabic', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Saudi_AA_Competitors.xlsx', 'Full Text', language= 'arabic', emotions = c('joy','trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_AA_BR.xlsx', 'Full Text', language= 'portuguese', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_AA_BR.xlsx', 'Full Text', language= 'portuguese', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_AA_BR.xlsx', 'Full Text', language= 'portuguese', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_Eczema_BR.xlsx', 'Full Text', language= 'portuguese', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_SC_BR.xlsx', 'Full Text', language= 'portuguese', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_SS_BR.xlsx', 'Full Text', language= 'portuguese', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_SS_BR.xlsx', 'Full Text', language= 'portuguese', emotions = c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_SS_BR.xlsx', 'Full Text', language= 'portuguese', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_Acne_BR.xlsx', 'Full Text', language= 'portuguese', emotions = c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_Acne_BR.xlsx', 'Full Text', language= 'portuguese', emotions = c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_SS_BR.xls', 'Full Text', language= 'portuguese', emotions = c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_SS_BR.xls', 'Full Text', language= 'portuguese', emotions = c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_SS_BR.xlsx', 'Full Text', language= 'portuguese', emotions = c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_SC_BR.xlsx', 'Full Text', language= 'portuguese', emotions = c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_Eczema_BR.xlsx', 'Full Text', language= 'portuguese', emotions = c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_AA_BR.xls', 'Full Text', language= 'portuguese', emotions = c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sample_AA_BR.xlsx', 'Full Text', language= 'portuguese', emotions = c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
library(devtools)
load_all()
view_languages()
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Acne_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/AntiAging_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Eczema_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Eczema_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/SensitiveSkin_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Skincare_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Eczema_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Eczema_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Skincare_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/SensitiveSkin_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
> run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/AntiAging_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/AntiAging_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/SensitiveSkin_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Skincare_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Acne_Sentiment.xlsx ', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Acne_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Eczema_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Eczema_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Skincare_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/SensitiveSkin_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/AntiAging_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Acne_Sentiment.xlsx', 'text', language= 'chinese simplified', emotions= c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
library()
library(devtools)
load_all()
library(devtools)
load_all()
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Acne_CD.xlsx', 'text', language='chinese simplifed', emotions= c('positive', 'negative'))
view_languages()
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Acne_CD.xlsx', 'text', language='chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Antiaging_Competitors.xlsx', 'text', language='chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sensitive_Skin_CD_Babies.xlsx', 'text', language='chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Skincare_Practicing_selfcare_CD_sample.xlsx', 'text', language='chinese simplified', emotions= c('positive', 'negative'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Skincare_Practicing_selfcare_CD_sample.xlsx', 'text', language='chinese simplified', emotions= c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('Users/victoria.daughtrey/Desktop/Emotions/Sensitive_Skin_CD_Babies.xlsx', 'text', language='chinese simplified', emotions= c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Sensitive_Skin_CD_Babies.xlsx', 'text', language='chinese simplified', emotions= c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Antiaging_Competitors.xlsx', 'text', language='chinese simplified', emotions= c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
run_emotions_all_languages('/Users/victoria.daughtrey/Desktop/Emotions/Acne_CD.xlsx', 'text', language='chinese simplified', emotions= c('joy', 'trust', 'sadness', 'fear', 'anger', 'disgust'))
library(devtools)
load_all()
path <- '/Users/daniele.dalgrande/Downloads/mentions.xlsx'
run_emotions_all_languages(path, 'Full Text', emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust', 'positive','negative'))
run_emotions_all_languages(path, 'Full Text', emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
run_emotions_all_languages(path, 'Full Text', emotions = c('positive','negative'))
path_2 <- '/Users/daniele.dalgrande/Downloads/mentions (1).xlsx'
run_emotions_all_languages(path_2, 'Full Text', emotions = c('positive','negative'))
run_emotions_all_languages(path_2, 'Full Text', emotions = c('positive','negative'))
run_emotions_all_languages(path_2, 'Full Text', emotions = c('joy', 'trust', 'fear', 'sadness', 'anger', 'disgust'))
