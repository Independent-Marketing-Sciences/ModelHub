appId: com.imsciences.modellingmate
productName: Modelling Mate
copyright: Copyright Â© 2025 Independent Marketing Sciences

directories:
  output: dist

# Configure where updates are published
# GitHub Releases (v1.0.0+)
publish:
  provider: github
  owner: Independent-Marketing-Sciences
  repo: ModelHub
  private: false
  releaseType: release

# Backup: Local/OneDrive distribution
# Uncomment this and comment out GitHub publish above to use OneDrive:
# publish:
#   provider: generic
#   url: "file://C:/Users/CameronRoberts/OneDrive - im-sciences.com/MasterDrive/Dev/04 - Python Modelling Toolkit/ModelHub-Updates"

files:
  - electron/**/*
  - out/**/*
  - backend/dist/modelling-mate-backend/**/*  # PyInstaller bundled backend
  - backend/src/**/*  # Keep source as fallback
  - scripts/**/*
  - "!backend/build/**/*"
  - "!backend/**/__pycache__/**/*"
  - "!backend/**/*.pyc"
  - package.json

# Unpack backend and scripts from ASAR so they can be executed
asarUnpack:
  - backend/**/*
  - scripts/**/*

win:
  target:
    - target: nsis
      arch:
        - x64
  icon: IMS_SiteIcon.png

nsis:
  oneClick: true
  perMachine: false
  allowToChangeInstallationDirectory: false
  deleteAppDataOnUninstall: false

  # Auto-uninstall previous version before installing new version
  allowElevation: true

  # Custom NSIS script to handle uninstall
  include: scripts/installer.nsh

# CRITICAL: Completely disable all signing
forceCodeSigning: false
